<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light only">
    <title>JamDay</title>
    <link rel="stylesheet" href="./style/dates.css">
    <link rel="stylesheet" href="./style/index.css">
    <link rel="stylesheet" href="./style/calendars.css">
    <link rel="stylesheet" href="./style/violet.css">
</head>

<body>
    <div class="violet">
        <div class="violet-container">
            <div class="vh">
                <article class="hero">
                    <img class="hero-img" src="./img/jam1.png" alt="">
                    <div class="main">
                        <h1 class="f-larisa-script">День варенья с Академией путешествий</h1>

                        <article class="date date-art-col">
                            <div class="date-column-stroked f-larisa-script">
                                <div class="month">12 июля</div>
                                <div class="date">17:00</div>
                                <div class="year">ул. Мельникайте, 124</div>
                            </div>
                        </article>
                    </div>
                </article>
            </div>



            <h3 class="f-larisa-script">Дорогие друзья!</h3>
            <article class="article-anons">
                <div class="anons"> &emsp; &emsp;15 июля в Москве пройдет международный фестиваль варенья. в преддверии
                    данного события проведем свой день варенья! <br>
                    &emsp; &emsp;Приглашаем всех 12 июля к 17 часам в субботу с баночкой вашего варенья к нам в Академию
                    путешествий! <br>
                    &emsp; &emsp;Никто никогда не узнает, как много рецептов варенья существует, но в этот день мы
                    обменяемся рецептами и расскажем откуда они появились у нас. Чай со свежей мятой и листом смородины
                    обещаем! А еще угостим вас нашим фирменным вареньем.
                </div>
                <img src="./img/jam2.png" alt="" class="spoon-img">
            </article>


            <h3 class="f-larisa-script">Наш специальный гость</h3>
            <article class="special_guest">
                <div class="guest-info">
                    <img class="guest-img" src="./img/guest.jpg" alt="">
                    <div class="guest-text">
                        <div class="guest-title f-larisa-script">Екатерина Кушнир</div>
                        <div class="guest-list">
                            <ul>
                                <li><svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M14.5 1.5C12.3872 1.50906 10.8166 1.8 9.68 2.30281C8.83188 2.67781 8.5 2.96156 8.5 3.92281V14C9.79906 12.8281 10.9519 12.5 15.5 12.5V1.5H14.5ZM1.5 1.5C3.61281 1.50906 5.18344 1.8 6.32 2.30281C7.16813 2.67781 7.5 2.96156 7.5 3.92281V14C6.20094 12.8281 5.04812 12.5 0.5 12.5V1.5H1.5Z"
                                            fill="#6C122F" />
                                    </svg>
                                    Преподаватель английского языка с 23-летним опытом</li>
                                <li><svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M14.5 1.5C12.3872 1.50906 10.8166 1.8 9.68 2.30281C8.83188 2.67781 8.5 2.96156 8.5 3.92281V14C9.79906 12.8281 10.9519 12.5 15.5 12.5V1.5H14.5ZM1.5 1.5C3.61281 1.50906 5.18344 1.8 6.32 2.30281C7.16813 2.67781 7.5 2.96156 7.5 3.92281V14C6.20094 12.8281 5.04812 12.5 0.5 12.5V1.5H1.5Z"
                                            fill="#6C122F" />
                                    </svg>
                                    Создатель онлайн-проекта Mindful English Club</li>
                                <li><svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M14.5 1.5C12.3872 1.50906 10.8166 1.8 9.68 2.30281C8.83188 2.67781 8.5 2.96156 8.5 3.92281V14C9.79906 12.8281 10.9519 12.5 15.5 12.5V1.5H14.5ZM1.5 1.5C3.61281 1.50906 5.18344 1.8 6.32 2.30281C7.16813 2.67781 7.5 2.96156 7.5 3.92281V14C6.20094 12.8281 5.04812 12.5 0.5 12.5V1.5H1.5Z"
                                            fill="#6C122F" />
                                    </svg>
                                    Работает исключительно со взрослыми</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="guest-finish">
                    Знает, чего хотят взрослые в изучении английского и как этого достичь с учетом новейших подходов в
                    обучении.
                </div>
            </article>

            <h3 class="f-larisa-script">О чем расскажет Екатерина?</h3>
            <article class="guest-talk">
                <ul>
                    <li><img src="./img/game-icons_check-mark.png" alt="">
                        Разные названия слова "варенье" в английском языке
                    </li>
                    <li><img src="./img/game-icons_check-mark.png" alt="">
                        Orange marmalade — обязательный атрибут английского завтрака
                    </li>
                    <li><img src="./img/game-icons_check-mark.png" alt="">
                        Английская королева и медвежонок Паддингтон
                    </li>
                    <li><img src="./img/game-icons_check-mark.png" alt="">
                        Какое варенье подают к традиционному английскому чаепитию
                    </li>
                </ul>
            </article>
           

            <h3 class="f-larisa-script">Команда Академии путешествий поделится:</h3>
            <article class="academy-talk">
                <ul>
                    <li><img src="./img/game-icons_check-mark.png" alt="">
                        Интересными историями от нас и наших туристов
                    </li>
                    <li><img src="./img/game-icons_check-mark.png" alt="">
                        Фишками и лайфхаками, как сделать путешествие идеальным, безопасным и увлекательным
                    </li>
                </ul>
            </article>
            <p class="stories">Послушаем ваши истории — для нас это очень ценно!</p>
            
            <h3 class="f-larisa-script">C любовью к вам и путешествиям команда Академии путешествий</h3>
            <article class="comand">
                <img src="./img/лена.jpg" alt="">
                <img src="./img/наташа.jpg" alt="">
            </article>
            <h3 class="f-larisa-script" id="title-timer">Встретимся через</h3>
            <div class="timer f-larisa-script">
                <div class="timer__item timer__days">00</div>
                <div class="separator">:</div>
                <div class="timer__item timer__hours">00</div>
                <div class="separator">:</div>
                <div class="timer__item timer__minutes">00</div>
                <div class="separator">:</div>
                <div class="timer__item timer__seconds">00</div>
            </div>


            <article class="confirmation">
                <!--<div class="text">Пожалуйста, отправьте анкету до 20.07. В случае, если кому-то из членов
                    Вашей
                    семьи не пришло приглашение, заполните и отправьте анкету несколько раз (для каждого гостя)</div>
                -->
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeUrPgBeuPiLsyGMVqM6U2izrnSMGZEtztWnrq310cEl-530w/viewform?embedded=true"  frameborder="0" marginheight="0" marginwidth="0">Загрузка…</iframe>
            </article>

            

            
        </div>

    </div>
    <div id="thankYouPopup" class="popup-overlay">
        <div class="popup-content">
            <div class="thank-you-message">Спасибо за анкету!</div>
        </div>
    </div>
    <script>

    </script>

    <script>

        document.addEventListener('DOMContentLoaded', () => {

            let frame = document.querySelector("iframe");
            console.log("frame.offsetHeight");
            console.log(frame);
            // Установите конечную дату
            const deadline = new Date('2025-07-12T23:59:59');

            // Найдите элементы DOM
            const elDays = document.querySelector('.timer__days');
            const elHours = document.querySelector('.timer__hours');
            const elMinutes = document.querySelector('.timer__minutes');
            const elSeconds = document.querySelector('.timer__seconds');

            // Функция склонения числительных
            const declensionNum = (num, words) => {
                return words[(num % 100 > 4 && num % 100 < 20) ? 2 : [2, 0, 1, 1, 1, 2][num % 10 < 5 ? num % 10 : 5]];
            };

            // Функция обновления таймера
            const updateTimer = () => {
                const now = new Date();
                const diff = Math.max(0, deadline - now);

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / (1000 * 60)) % 60);
                const seconds = Math.floor((diff / 1000) % 60);

                elDays.textContent = String(days).padStart(2, '0');
                elHours.textContent = String(hours).padStart(2, '0');
                elMinutes.textContent = String(minutes).padStart(2, '0');
                elSeconds.textContent = String(seconds).padStart(2, '0');

                elDays.dataset.title = declensionNum(days, ['день', 'дня', 'дней']);
                elHours.dataset.title = declensionNum(hours, ['час', 'часа', 'часов']);
                elMinutes.dataset.title = declensionNum(minutes, ['минуту', 'минуты', 'минут']);
                elSeconds.dataset.title = declensionNum(seconds, ['секунду', 'секунды', 'секунд']);

                if (diff === 0) {
                    clearInterval(timerId);
                }
            };

            // Запустите таймер
            updateTimer();
            const timerId = setInterval(updateTimer, 1000);
        });
        let my_form = document.querySelector("#root_form");
        my_form.addEventListener('submit', async (e) => {
            e.preventDefault();

            let URL_APP1 = "https://script.google.com/macros/s/AKfycbwRxrq9BVSLLZ7bL0OiCJvhCnEvSRkVZcfmsGrxwXXLHdxzsJTQtxsdwM5qdwDZJpyD/exec";
            var details = {
                name: my_form.elements.guest.value.trim(),
                confirm: my_form.elements.confirm.value,
                confirm_zags: my_form.elements.confirm_zags.value,
                food: my_form.elements.food.value,
                alko: JSON.stringify(Array.from(my_form.elements.alko)
                    .filter(checkbox => checkbox.checked)
                    .map(checkbox => checkbox.value)),
            };
            if (details.name == null) return;
            // подготавливаем данные для отправки
            let formBody = [];
            for (let property in details) {
                // кодируем названия и значения параметров
                let encodedKey = encodeURIComponent(property);
                let encodedValue = encodeURIComponent(details[property]);
                formBody.push(encodedKey + "=" + encodedValue);
            }
            // склеиваем параметры в одну строку
            formBody = formBody.join("&");
            console.log("formBody");
            console.log(formBody);

            my_form.reset();
            const popup = document.getElementById('thankYouPopup');
            popup.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            // Автозакрытие через 3 секунды
            setTimeout(() => {
                popup.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 3000);
            // выполняем отправку данных в Google Apps
            const result = await fetch(URL_APP1, {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",
                },
                mode: "cors", //<- оставим по умолчанию
                body: formBody,
            })
            //document.querySelector('.close-btn').click();

        })
    </script>
</body>

</html>